<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Access - Punjab Land Analytics Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../js/tailwind-config.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <style>
        pre code { font-size: 13px; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="flex items-center justify-between px-4 h-16">
            <a href="../index.html" class="flex items-center gap-2">
                <div class="w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center">
                    <i class="fas fa-landmark text-white text-sm"></i>
                </div>
                <span class="font-bold text-primary-700">PLAP</span>
            </a>
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm">DR</div>
                <a href="../login.html" class="text-gray-400 hover:text-red-500 ml-2"><i class="fas fa-sign-out-alt"></i></a>
            </div>
        </div>
    </header>

    <div class="flex">
        <!-- Sidebar -->
        <aside class="w-64 bg-white shadow-lg min-h-screen fixed left-0 top-16 hidden lg:block">
            <nav class="p-4">
                <a href="dashboard.html" class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-100">
                    <i class="fas fa-home w-5"></i> Dashboard
                </a>
                <a href="analysis.html" class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-100 mt-1">
                    <i class="fas fa-chart-bar w-5"></i> Analysis
                </a>
                <a href="download.html" class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-100 mt-1">
                    <i class="fas fa-download w-5"></i> Download
                </a>
                <div class="border-t my-3"></div>
                <a href="api.html" class="flex items-center gap-3 px-3 py-2 rounded-lg bg-primary-50 text-primary-700 font-medium">
                    <i class="fas fa-code w-5"></i> API Access
                </a>
                <a href="libraries.html" class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-100 mt-1">
                    <i class="fas fa-book-open w-5"></i> R/Python Libraries
                </a>
            </nav>

            <div class="p-4 border-t">
                <h4 class="text-xs font-semibold text-gray-500 uppercase mb-2">API Docs</h4>
                <nav class="space-y-1 text-sm">
                    <a href="#getting-started" class="block px-3 py-1.5 rounded text-gray-600 hover:bg-gray-100">Getting Started</a>
                    <a href="#authentication" class="block px-3 py-1.5 rounded text-gray-600 hover:bg-gray-100">Authentication</a>
                    <a href="#endpoints" class="block px-3 py-1.5 rounded text-gray-600 hover:bg-gray-100">Endpoints</a>
                    <a href="#extracts" class="block px-3 py-1.5 rounded text-gray-600 hover:bg-gray-100">Data Extracts</a>
                    <a href="#metadata" class="block px-3 py-1.5 rounded text-gray-600 hover:bg-gray-100">Metadata</a>
                    <a href="#rate-limits" class="block px-3 py-1.5 rounded text-gray-600 hover:bg-gray-100">Rate Limits</a>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 lg:ml-64 p-6">
            <div class="max-w-4xl mx-auto">
                <!-- Header -->
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">PLAP API</h1>
                    <p class="text-gray-500">Programmatic access to Punjab land data for automated workflows</p>
                </div>

                <!-- API Key Card -->
                <div class="bg-gradient-to-r from-primary-500 to-primary-700 rounded-xl shadow-lg p-6 mb-8 text-white">
                    <div class="flex items-start justify-between">
                        <div>
                            <h2 class="text-lg font-semibold mb-2">Your API Key</h2>
                            <p class="text-primary-100 text-sm mb-4">Use this key to authenticate API requests</p>
                            <div class="flex items-center gap-3">
                                <code class="bg-black/30 px-4 py-2 rounded-lg font-mono text-sm">
                                    plap_sk_live_***********************4f8a
                                </code>
                                <button class="bg-white/20 hover:bg-white/30 px-3 py-2 rounded-lg text-sm">
                                    <i class="fas fa-eye mr-1"></i>Show
                                </button>
                                <button class="bg-white/20 hover:bg-white/30 px-3 py-2 rounded-lg text-sm">
                                    <i class="fas fa-copy mr-1"></i>Copy
                                </button>
                            </div>
                        </div>
                        <button class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg text-sm">
                            <i class="fas fa-sync mr-2"></i>Regenerate Key
                        </button>
                    </div>
                    <div class="mt-4 pt-4 border-t border-white/20 flex items-center gap-6 text-sm text-primary-100">
                        <span><i class="fas fa-calendar mr-2"></i>Created: Nov 15, 2024</span>
                        <span><i class="fas fa-chart-line mr-2"></i>Requests this month: 1,234 / 10,000</span>
                    </div>
                </div>

                <!-- Getting Started -->
                <section id="getting-started" class="bg-white rounded-xl shadow-sm p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Getting Started</h2>
                    <p class="text-gray-600 mb-4">
                        The PLAP API allows you to programmatically create data extracts, check their status,
                        and download completed files. The API uses JSON for request/response payloads.
                    </p>

                    <div class="bg-gray-900 rounded-lg p-4 mb-4">
                        <div class="flex items-center justify-between text-gray-400 text-xs mb-2">
                            <span>Base URL</span>
                        </div>
                        <code class="text-green-400 font-mono">https://api.plap.punjab.gov.pk/v1</code>
                    </div>

                    <h3 class="font-semibold text-gray-800 mb-2">Quick Start Example</h3>
                    <pre class="bg-gray-900 rounded-lg p-4 overflow-x-auto"><code class="language-bash"># Create an extract request
curl -X POST https://api.plap.punjab.gov.pk/v1/extracts \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "dataset": "registry_transactions",
    "variables": ["district_id", "transaction_type", "transaction_value"],
    "filters": {
      "year": {"gte": 2020, "lte": 2024},
      "district_id": [1, 2, 3]
    },
    "format": "csv"
  }'</code></pre>
                </section>

                <!-- Authentication -->
                <section id="authentication" class="bg-white rounded-xl shadow-sm p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Authentication</h2>
                    <p class="text-gray-600 mb-4">
                        All API requests must include your API key in the Authorization header.
                    </p>

                    <pre class="bg-gray-900 rounded-lg p-4 overflow-x-auto mb-4"><code class="language-bash">Authorization: Bearer plap_sk_live_xxxxxxxxxxxx</code></pre>

                    <div class="bg-amber-50 border border-amber-200 rounded-lg p-4">
                        <h4 class="font-medium text-amber-800 mb-2"><i class="fas fa-shield-alt mr-2"></i>Security Best Practices</h4>
                        <ul class="text-sm text-amber-700 space-y-1">
                            <li>Never expose your API key in client-side code</li>
                            <li>Store keys securely using environment variables</li>
                            <li>Regenerate your key if you suspect it has been compromised</li>
                        </ul>
                    </div>
                </section>

                <!-- Endpoints -->
                <section id="endpoints" class="bg-white rounded-xl shadow-sm p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">API Endpoints</h2>

                    <div class="space-y-4">
                        <!-- Endpoint 1 -->
                        <div class="border rounded-lg overflow-hidden">
                            <div class="flex items-center gap-3 px-4 py-3 bg-gray-50 border-b">
                                <span class="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">POST</span>
                                <code class="font-mono text-sm">/extracts</code>
                                <span class="text-gray-500 text-sm ml-auto">Create a new extract</span>
                            </div>
                            <div class="p-4">
                                <p class="text-sm text-gray-600 mb-3">Submit a request to create a new data extract.</p>
                                <pre class="bg-gray-900 rounded-lg p-4 overflow-x-auto text-sm"><code class="language-json">{
  "dataset": "registry_transactions",
  "variables": ["district_id", "transaction_type", "transaction_value", "year"],
  "filters": {
    "year": {"gte": 2020},
    "transaction_type": ["sale", "gift"]
  },
  "format": "csv",
  "terminology": "punjab"
}</code></pre>
                            </div>
                        </div>

                        <!-- Endpoint 2 -->
                        <div class="border rounded-lg overflow-hidden">
                            <div class="flex items-center gap-3 px-4 py-3 bg-gray-50 border-b">
                                <span class="bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded">GET</span>
                                <code class="font-mono text-sm">/extracts/{extract_id}</code>
                                <span class="text-gray-500 text-sm ml-auto">Get extract status</span>
                            </div>
                            <div class="p-4">
                                <p class="text-sm text-gray-600 mb-3">Check the status of an extract request.</p>
                                <pre class="bg-gray-900 rounded-lg p-4 overflow-x-auto text-sm"><code class="language-json">{
  "id": "ext_abc123",
  "status": "completed",
  "created_at": "2024-12-04T10:30:00Z",
  "completed_at": "2024-12-04T10:31:45Z",
  "download_url": "https://api.plap.punjab.gov.pk/v1/extracts/ext_abc123/download",
  "record_count": 45678,
  "file_size_bytes": 12345678
}</code></pre>
                            </div>
                        </div>

                        <!-- Endpoint 3 -->
                        <div class="border rounded-lg overflow-hidden">
                            <div class="flex items-center gap-3 px-4 py-3 bg-gray-50 border-b">
                                <span class="bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded">GET</span>
                                <code class="font-mono text-sm">/extracts/{extract_id}/download</code>
                                <span class="text-gray-500 text-sm ml-auto">Download extract file</span>
                            </div>
                            <div class="p-4">
                                <p class="text-sm text-gray-600">Returns the data file. Only available when status is "completed".</p>
                            </div>
                        </div>

                        <!-- Endpoint 4 -->
                        <div class="border rounded-lg overflow-hidden">
                            <div class="flex items-center gap-3 px-4 py-3 bg-gray-50 border-b">
                                <span class="bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded">GET</span>
                                <code class="font-mono text-sm">/extracts</code>
                                <span class="text-gray-500 text-sm ml-auto">List your extracts</span>
                            </div>
                            <div class="p-4">
                                <p class="text-sm text-gray-600">Returns a list of your recent extract requests.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Metadata Endpoints -->
                <section id="metadata" class="bg-white rounded-xl shadow-sm p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Metadata Endpoints</h2>
                    <p class="text-gray-600 mb-4">Discover available datasets and variables programmatically.</p>

                    <div class="space-y-4">
                        <div class="border rounded-lg overflow-hidden">
                            <div class="flex items-center gap-3 px-4 py-3 bg-gray-50 border-b">
                                <span class="bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded">GET</span>
                                <code class="font-mono text-sm">/datasets</code>
                            </div>
                            <div class="p-4">
                                <pre class="bg-gray-900 rounded-lg p-4 overflow-x-auto text-sm"><code class="language-json">{
  "datasets": [
    {
      "id": "registry_transactions",
      "name": "Registry Transactions",
      "description": "Property registration records from ESORS",
      "record_count": 2547892,
      "date_range": {"start": "2015-01-01", "end": "2024-12-01"},
      "variables_count": 24
    }
  ]
}</code></pre>
                            </div>
                        </div>

                        <div class="border rounded-lg overflow-hidden">
                            <div class="flex items-center gap-3 px-4 py-3 bg-gray-50 border-b">
                                <span class="bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded">GET</span>
                                <code class="font-mono text-sm">/datasets/{dataset_id}/variables</code>
                            </div>
                            <div class="p-4">
                                <pre class="bg-gray-900 rounded-lg p-4 overflow-x-auto text-sm"><code class="language-json">{
  "variables": [
    {
      "id": "district_id",
      "name_punjab": "Zila",
      "name_ladm": "LA_AdministrativeSource",
      "type": "integer",
      "description": "District identifier",
      "codes_url": "/datasets/registry_transactions/variables/district_id/codes"
    }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Rate Limits -->
                <section id="rate-limits" class="bg-white rounded-xl shadow-sm p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Rate Limits</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="text-left px-4 py-3 font-medium text-gray-600">User Type</th>
                                    <th class="text-left px-4 py-3 font-medium text-gray-600">Requests/Minute</th>
                                    <th class="text-left px-4 py-3 font-medium text-gray-600">Requests/Month</th>
                                    <th class="text-left px-4 py-3 font-medium text-gray-600">Max Records/Extract</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y">
                                <tr>
                                    <td class="px-4 py-3">Researcher</td>
                                    <td class="px-4 py-3">60</td>
                                    <td class="px-4 py-3">10,000</td>
                                    <td class="px-4 py-3">100,000</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3">Government</td>
                                    <td class="px-4 py-3">120</td>
                                    <td class="px-4 py-3">Unlimited</td>
                                    <td class="px-4 py-3">500,000</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                        <p class="text-sm text-blue-700">
                            <i class="fas fa-info-circle mr-2"></i>
                            Rate limit headers are included in every response:
                            <code class="bg-blue-100 px-1 rounded">X-RateLimit-Remaining</code>,
                            <code class="bg-blue-100 px-1 rounded">X-RateLimit-Reset</code>
                        </p>
                    </div>
                </section>

                <!-- SDKs -->
                <section class="bg-white rounded-xl shadow-sm p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Client Libraries</h2>
                    <p class="text-gray-600 mb-4">Use our official libraries for easier integration:</p>

                    <div class="grid md:grid-cols-2 gap-4">
                        <a href="libraries.html" class="border rounded-lg p-4 hover:border-primary-500 hover:bg-primary-50 flex items-center gap-4">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <i class="fab fa-r-project text-blue-600 text-2xl"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">plapr</h4>
                                <p class="text-sm text-gray-500">R package on CRAN</p>
                            </div>
                        </a>
                        <a href="libraries.html" class="border rounded-lg p-4 hover:border-primary-500 hover:bg-primary-50 flex items-center gap-4">
                            <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                                <i class="fab fa-python text-yellow-600 text-2xl"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">plappy</h4>
                                <p class="text-sm text-gray-500">Python package on PyPI</p>
                            </div>
                        </a>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>hljs.highlightAll();</script>
</body>
</html>
